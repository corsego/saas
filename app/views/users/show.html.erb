<% model_class = User %>
<div class="card shadow">
  <div class="card-header">
    <div class="fa fa-user"></div>
    <%= link_to @user.email, user_path(@user) %>
  </div>

  <% if @user.provider.present? %>

    <div class="card-footer">
      <% if @user.image? %>
        <div class="row"></div>
        <%= image_tag @user.image, size: '40x40', alt: "#{@user.email}", class: 'rounded-circle' %>
      <% end %>
      <br>
      <strong><%= model_class.human_attribute_name(:provider).capitalize %>:</strong>
      <%= @user.provider %>
      <br>
      <strong><%= model_class.human_attribute_name(:name).capitalize %>:</strong>
      <%= @user.name %>
    </div>
    
  <% end %>

  <% if @user == current_user %>

    <div class="card-footer">
        <% unless @user.identities.pluck(:provider).include?("google_oauth2") %>
          <%= link_to user_google_oauth2_omniauth_authorize_path, class: 'btn btn-outline-danger btn-sm', data: { disable_with: "#{t(".connecting")}..." } do %>
            <div class="fab fa-google"></div>
            <%= t(".connect") %>
            Google
          <% end %>
        <% else %>
          <button type="button" class="btn btn-sm btn-danger" disabled>
            <div class="fab fa-google"></div>
            <%= t(".connected") %>
            Google
          </button>
        <% end %>
        <% unless @user.identities.pluck(:provider).include?("github") %>
          <%= link_to user_github_omniauth_authorize_path, class: 'btn btn-outline-dark btn-sm', data: { disable_with: "#{t(".connecting")}..." } do %>
            <div class="fab fa-github"></div>
            <%= t(".connect") %>
            Github
          <% end %>
        <% else %>
          <button type="button" class="btn btn-sm btn-dark" disabled>
            <div class="fab fa-github"></div>
            <%= t(".connected") %>
            Github
          </button>
        <% end %>
    </div>

    <div class="card-footer">
      <div class="dropdown">
        <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="userLanguageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= model_class.human_attribute_name(:language).capitalize %>:
          <%= @user.language %>
        </button>
        <div class="dropdown-menu" aria-labelledby="userLanguageDropdown">
          <% I18n.available_locales.excluding(I18n.locale).each do |language| %>
              <%= link_to language, root_path(locale: language), class: "dropdown-item" %>
          <% end %>
        </div>
      </div>
    </div>

  <% end %>

  <div class="card-footer">
    <%= model_class.human_attribute_name(:created_at).capitalize %>:
    <%= time_ago_in_words(@user.created_at) %>
    <%= t(".ago") %>
  </div>
  <div class="card-footer">
    <b>
      <%= model_class.human_attribute_name(:sign_in_count).capitalize %>:
    </b>
    <%= @user.sign_in_count %>
    <div class="row"></div>
    <b>
      <%= model_class.human_attribute_name(:current_sign_in_at).capitalize %>:
    </b>
    <%= @user.current_sign_in_at %>
    <div class="row"></div>
    <b>
      <%= model_class.human_attribute_name(:last_sign_in_at).capitalize %>:
    </b>
    <%= @user.last_sign_in_at %>
    <div class="row"></div>
    <b>
      <%= model_class.human_attribute_name(:current_sign_in_ip).capitalize %>:
    </b>
    <%= @user.current_sign_in_ip %>
    <div class="row"></div>
    <b>
      <%= model_class.human_attribute_name(:last_sign_in_ip).capitalize %>:
    </b>
    <%= @user.last_sign_in_ip %>
  </div>
  <div class="card-footer">
    <%= model_class.human_attribute_name(:confirmed).capitalize %>:
    <%= boolean_label(@user.confirmed?) %>
    <br>
    <%= model_class.human_attribute_name(:superadmin).capitalize %>:
    <%= boolean_label(@user.superadmin) %>
  </div>
</div>
